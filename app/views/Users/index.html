#{extends 'main.html' /}
#{set title:messages.get('users.title') /}

#{set 'moreStyles'}
<!-- DataTables CSS -->
<link href="@{'/public/sbadmin/bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css'}" rel="stylesheet">

<!-- DataTables Responsive CSS -->
<link href="@{'/public/sbadmin/bower_components/datatables-responsive/css/dataTables.responsive.css'}" rel="stylesheet">
#{/}

<div class="row">
    <div class="col-lg-12">
    	<p class="pull-right">
    		<a href="@{Users.create()}" class="btn btn-primary"><i class="fa fa-plus"></i> &{'users.new'}</a>
    	</p>
    </div>
</div>

<!-- /.row -->
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="dataTable_wrapper table-responsive">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-list">
                        <thead>
                            <tr>
                            	<th>&{'users.table.username'}</th>
                                <th>&{'users.table.firstName'}</th>
                                <th>&{'users.table.lastName'}</th>
                                <th>&{'users.table.role'}</th>
                                <th>&{'users.table.lastAccess'}</th>
                                <th style="width:75px;" class="text-center">&{'users.table.active'}</th>
                                <th style="width:75px;" class="text-center">&{'users.table.edit'}</th>
                            </tr>
                        </thead>
                        <tbody>
                        	#{list users, as: 'user'}
                        	<tr class="odd">
                                <td>${user.username}</td>
                                <td>${user.firstName}</td>
                                <td>${user.lastName}</td>
                                <td>${user.role?.name}</td>
                                <td>${user.lastAccess?.format('dd/MM/yy HH:mm:ss')}</td>
                                <td class="text-center">
                                #{if user.active}
                                	<span class="label label-success">&{'state.active'}</span>
                                #{/if}
                                #{else}
                                	<span class="label label-danger">&{'state.inactive'}</span>
                                #{/else}
                               </td>
                               <td class="text-center">

                                   <div class="btn-group">
                                       <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                           &{'table.actions'}
                                           <span class="caret"></span>
                                       </button>
                                       <ul class="dropdown-menu pull-right" role="menu">
                                           <li>
                                               <a href="@{Users.edit(user.id)}"><i class="fa fa-edit"></i> &{'users.table.edit'}</a>
                                           </li>
                                           <li>
                                               <a href="@{Users.resetPassword(user.id)}"><i class="fa fa-key"></i> &{'users.table.reset'}</a>
                                           </li>
                                       </ul>
                                   </div>
                               </td>
                            </tr>
                        	#{/list}
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

#{set 'moreScripts'}

<!-- DataTables JavaScript -->
<script src="@{'/public/sbadmin/bower_components/datatables/media/js/jquery.dataTables.min.js'}"></script>
<script src="@{'/public/sbadmin/bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js'}"></script>

<script>
    $(document).ready(function() {
        $('#dataTables-list').DataTable({
                responsive: true,
                columnDefs: [ 
                	{ "targets": 5, "orderable": false },
                	{ "targets": 6, "orderable": false }
                 ],
                 language: #{data-tables-lang/}
        });
    });
</script>

#{/}